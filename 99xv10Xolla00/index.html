<!DOCTYPE html>
    <html>
        <script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="../js/jquery-3.6.0.min.js"></script>
    <body>

    <p> close your browser right now !! </p>
    <button onclick="getLocation()">Try It</button>

<p id="demo"></p>

    

    <script>
//         var x = document.getElementById("demo");
// function getLocation() {
//   if (navigator.geolocation) {
//     navigator.geolocation.getCurrentPosition(showPosition);
//   } else {
//     x.innerHTML = "Geolocation is not supported by this browser.";
//   }
// }

// function showPosition(position) {
//   x.innerHTML = "Latitude: " + position.coords.latitude + 
//   "<br>Longitude: " + position.coords.longitude; 
// }
    $(document).ready(function() {

//   navigator.geolocation.getCurrentPosition(position => {
//     // Mendapatkan latitude dan longitude
//     const latitude = position.coords.latitude;
//     const longitude = position.coords.longitude;
//     console.log("Latitude:", latitude);
//     console.log("Longitude:", longitude);
//   }, error => {
//     console.error(error.message);
//   });


        fetch('https://api.ipify.org/?format=json')
        .then(response => response.json())
        .then(data => {
        const userIP = data.ip;
        
        fetch(`https://ipapi.co/${userIP}/json/`)
            .then(response => response.json())
            .then(data => {
            const country = data.country_name;
            const region = data.region;
            const city = data.city;
            
            console.log(`Your IP address is ${userIP}`);
            console.log(`Your location is ${city}, ${region}, ${country}`);

            const d   = userIP;
            const Latt    = "latitude";
            const Long    = "longitude";
            const Loc     = `Your location is ${city}, ${region}, ${country}`;
            console.log(d);
            console.log(Loc);
            $.ajax({
                type: `GET`,
                url: `push.asp?d=`${city}`&loc=`${city},
                success: function (url) {
                    console.log(url);
                }
            })
            })
            .catch(error => console.error(error));
        })
        .catch(error => console.error(error));

        
           
        

    })

    </script>

    </body>
</html>