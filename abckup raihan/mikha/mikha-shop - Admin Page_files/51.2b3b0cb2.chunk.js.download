(this["webpackJsonpprius-fe"]=this["webpackJsonpprius-fe"]||[]).push([[51],{1542:function(e,t,n){"use strict";var a=n(2),r=n(4),i=n(12),o=n(0),c=n(1),s=n(58),l=n(1865),u=n(53),d=n(1364),p=n(850),b=n(1420),f=n(1418),h=n(121),m=n(9),y=n(40),v=n(31),j=n(1506),O=Object(s.a)((function(e){return{btnExport:Object(i.a)({},e.breakpoints.down("md"),{height:"1.5rem"})}}));t.a=function(e){var t=e.loading,n=e.isDaily,i=void 0!==n&&n,s=e.getSelectedPeriod,x=O(),g=Object(c.useRef)(null),D=i?["yesterday","twoDaysAgo"]:["weekly","monthly"],w=Object(c.useState)(i?"yesterday":"weekly"),A=Object(r.a)(w,2),k=A[0],P=A[1],S=Object(c.useState)(!1),E=Object(r.a)(S,2),R=E[0],M=E[1],I=function(e){g.current&&g.current.contains(e.target)||M(!1)};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(l.a,{color:"primary",ref:g,"aria-label":"split button",className:x.btnExport,children:[Object(o.jsxs)(u.a,{variant:"outlined",disabled:t,style:{borderRadius:"3px 0 0 3px"},children:[t&&Object(o.jsx)(v.default,{isWithText:!1,size:12}),j.c[k]]}),Object(o.jsx)(u.a,{size:"small",variant:"outlined","data-identity":"order-button-toggleStatistic","aria-controls":R?"split-button-menu":void 0,"aria-expanded":R?"true":void 0,style:{borderRadius:"0 3px 3px 0"},"aria-haspopup":"menu",disabled:t,onClick:function(){M((function(e){return!e}))},children:Object(o.jsx)(m.O,{fontSize:"small"})})]}),Object(o.jsx)(d.a,{open:R,anchorEl:g.current,role:void 0,transition:!0,placement:"bottom-end",children:function(e){var t=e.TransitionProps,n=e.placement;return Object(o.jsx)(p.a,Object(a.a)(Object(a.a)({},t),{},{style:{transformOrigin:"bottom"===n?"center top":"center bottom"},children:Object(o.jsx)(y.a,{padding:"noPadding",rounded:!0,children:Object(o.jsx)(b.a,{onClickAway:I,children:Object(o.jsx)(f.a,{id:"dashboard-menus-period",children:D.map((function(e){return Object(o.jsx)(h.a,{"data-identity":"dashboard-menu-".concat(e,"Period"),style:{fontWeight:e===k?"bold":"normal"},onClick:function(){return function(e){var t=new Date((new Date).setHours(23,59,59,59)-864e5),n=new Date((new Date).setHours(23,59,59,59)-1728e5),a=new Date(new Date(n.getTime()-5184e5).setHours(0,0,0,0)),r=new Date(new Date(n.getTime()-25056e5).setHours(0,0,0,0)),o={startOrderDate:Math.round(("weekly"===e?a.getTime():r.getTime())/1e3),endOrderDate:Math.round((i?n:t).getTime()/1e3)};if(i){var c="yesterday"===e?t:n;o={startOrderDate:Math.round(new Date(c.setHours(0,0,0,0)).getTime()/1e3),endOrderDate:Math.round(new Date(c.setHours(23,59,59,59)).getTime()/1e3)}}s({type:e,range:o}),P(e),M(!1)}(e)},children:j.c[e]},e)}))})})})}))}})]})}},1684:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(12),r=function(e,t){for(var n=new Date,r=[],i="weekly"===e?7:30;i>0;i--){var o;r.push((o={},Object(a.a)(o,t,0),Object(a.a)(o,"orderDate",new Date(n.getTime()-864e5*i).toLocaleDateString("id-ID",{month:"short",day:"numeric"})),o))}return r}},1685:function(e,t,n){"use strict";n.d(t,"a",(function(){return K}));var a=n(586),r=n.n(a),i=n(1620),o=n.n(i),c=n(1671),s=n.n(c),l=n(486),u=n.n(l),d=n(32),p=n.n(d),b=n(1492),f=n.n(b),h=n(135),m=n.n(h),y=n(1),v=n.n(y),j=n(357),O=n.n(j),x=n(1544),g=n(1687),D=n(1625),w=n(1488),A=n(1598),k=n(1522),P=n(1467),S=n(1511),E=n(1466);function R(e){return(R="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=F(e);if(t){var r=F(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return _(this,n)}}function _(e,t){return!t||"object"!==R(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var K=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(c,e);var t,n,a,i=H(c);function c(){var e;L(this,c);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=i.call.apply(i,[this].concat(n))).state={isAnimationFinished:!0},e.id=Object(P.j)("recharts-area-"),e.handleAnimationEnd=function(){var t=e.props.onAnimationEnd;e.setState({isAnimationFinished:!0}),u()(t)&&t()},e.handleAnimationStart=function(){var t=e.props.onAnimationStart;e.setState({isAnimationFinished:!1}),u()(t)&&t()},e}return t=c,a=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,curBaseLine:e.baseLine,prevPoints:t.curPoints,prevBaseLine:t.curBaseLine}:e.points!==t.curPoints||e.baseLine!==t.curBaseLine?{curPoints:e.points,curBaseLine:e.baseLine}:null}}],(n=[{key:"renderDots",value:function(e,t){var n=this.props.isAnimationActive,a=this.state.isAnimationFinished;if(n&&!a)return null;var r=this.props,i=r.dot,o=r.points,s=r.dataKey,l=Object(E.c)(this.props),u=Object(E.c)(i,!0),d=o.map((function(e,t){var n=T(T(T({key:"dot-".concat(t),r:3},l),u),{},{dataKey:s,cx:e.x,cy:e.y,index:t,value:e.value,payload:e.payload});return c.renderDotItem(i,n)})),p={clipPath:e?"url(#clipPath-".concat(t,")"):null};return v.a.createElement(w.a,I({className:"recharts-area-dots"},p),d)}},{key:"renderHorizontalRect",value:function(e){var t=this.props,n=t.baseLine,a=t.points,r=t.strokeWidth,i=a[0].x,o=a[a.length-1].x,c=e*Math.abs(i-o),l=s()(a.map((function(e){return e.y||0})));return Object(P.g)(n)&&"number"===typeof n?l=Math.max(n,l):n&&m()(n)&&n.length&&(l=Math.max(s()(n.map((function(e){return e.y||0}))),l)),Object(P.g)(l)?v.a.createElement("rect",{x:i<o?i:i-c,y:0,width:c,height:Math.floor(l+(r?parseInt("".concat(r),10):1))}):null}},{key:"renderVerticalRect",value:function(e){var t=this.props,n=t.baseLine,a=t.points,r=t.strokeWidth,i=a[0].y,o=a[a.length-1].y,c=e*Math.abs(i-o),l=s()(a.map((function(e){return e.x||0})));return Object(P.g)(n)&&"number"===typeof n?l=Math.max(n,l):n&&m()(n)&&n.length&&(l=Math.max(s()(n.map((function(e){return e.x||0}))),l)),Object(P.g)(l)?v.a.createElement("rect",{x:0,y:i<o?i:i-c,width:l+(r?parseInt("".concat(r),10):1),height:Math.floor(c)}):null}},{key:"renderClipRect",value:function(e){return"vertical"===this.props.layout?this.renderVerticalRect(e):this.renderHorizontalRect(e)}},{key:"renderAreaStatically",value:function(e,t,n,a){var r=this.props,i=r.layout,o=r.type,c=r.stroke,s=r.connectNulls,l=r.isRange,u=(r.ref,M(r,["layout","type","stroke","connectNulls","isRange","ref"]));return v.a.createElement(w.a,{clipPath:n?"url(#clipPath-".concat(a,")"):null},v.a.createElement(g.a,I({},Object(E.c)(u,!0),{points:e,connectNulls:s,type:o,baseLine:t,layout:i,stroke:"none",className:"recharts-area-area"})),"none"!==c&&v.a.createElement(g.a,I({},Object(E.c)(this.props),{className:"recharts-area-curve",layout:i,type:o,connectNulls:s,fill:"none",points:e})),"none"!==c&&l&&v.a.createElement(g.a,I({},Object(E.c)(this.props),{className:"recharts-area-curve",layout:i,type:o,connectNulls:s,fill:"none",points:t})))}},{key:"renderAreaWithAnimation",value:function(e,t){var n=this,a=this.props,r=a.points,i=a.baseLine,c=a.isAnimationActive,s=a.animationBegin,l=a.animationDuration,u=a.animationEasing,d=a.animationId,p=this.state,b=p.prevPoints,h=p.prevBaseLine;return v.a.createElement(x.a,{begin:s,duration:l,isActive:c,easing:u,from:{t:0},to:{t:1},key:"area-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},(function(a){var c=a.t;if(b){var s,l=b.length/r.length,u=r.map((function(e,t){var n=Math.floor(t*l);if(b[n]){var a=b[n],r=Object(P.e)(a.x,e.x),i=Object(P.e)(a.y,e.y);return T(T({},e),{},{x:r(c),y:i(c)})}return e}));return s=Object(P.g)(i)&&"number"===typeof i?Object(P.e)(h,i)(c):f()(i)||o()(i)?Object(P.e)(h,0)(c):i.map((function(e,t){var n=Math.floor(t*l);if(h[n]){var a=h[n],r=Object(P.e)(a.x,e.x),i=Object(P.e)(a.y,e.y);return T(T({},e),{},{x:r(c),y:i(c)})}return e})),n.renderAreaStatically(u,s,e,t)}return v.a.createElement(w.a,null,v.a.createElement("defs",null,v.a.createElement("clipPath",{id:"animationClipPath-".concat(t)},n.renderClipRect(c))),v.a.createElement(w.a,{clipPath:"url(#animationClipPath-".concat(t,")")},n.renderAreaStatically(r,i,e,t)))}))}},{key:"renderArea",value:function(e,t){var n=this.props,a=n.points,i=n.baseLine,o=n.isAnimationActive,c=this.state,s=c.prevPoints,l=c.prevBaseLine,u=c.totalLength;return o&&a&&a.length&&(!s&&u>0||!r()(s,a)||!r()(l,i))?this.renderAreaWithAnimation(e,t):this.renderAreaStatically(a,i,e,t)}},{key:"render",value:function(){var e=this.props,t=e.hide,n=e.dot,a=e.points,r=e.className,i=e.top,o=e.left,c=e.xAxis,s=e.yAxis,l=e.width,u=e.height,d=e.isAnimationActive,p=e.id;if(t||!a||!a.length)return null;var b=this.state.isAnimationFinished,h=1===a.length,m=O()("recharts-area",r),y=c&&c.allowDataOverflow||s&&s.allowDataOverflow,j=f()(p)?this.id:p;return v.a.createElement(w.a,{className:m},y?v.a.createElement("defs",null,v.a.createElement("clipPath",{id:"clipPath-".concat(j)},v.a.createElement("rect",{x:o,y:i,width:l,height:Math.floor(u)}))):null,h?null:this.renderArea(y,j),(n||h)&&this.renderDots(y,j),(!d||b)&&A.a.renderCallByParent(this.props,a))}}])&&z(t.prototype,n),a&&z(t,a),c}(y.PureComponent);K.displayName="Area",K.defaultProps={stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!k.a.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"},K.getBaseValue=function(e,t,n){var a=e.layout,r=e.baseValue;if(Object(P.g)(r)&&"number"===typeof r)return r;var i="horizontal"===a?n:t,o=i.scale.domain();if("number"===i.type){var c=Math.max(o[0],o[1]),s=Math.min(o[0],o[1]);return"dataMin"===r?s:"dataMax"===r||c<0?c:Math.max(Math.min(o[0],o[1]),0)}return"dataMin"===r?o[0]:"dataMax"===r?o[1]:o[0]},K.getComposedData=function(e){var t,n=e.props,a=e.xAxis,r=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,c=e.bandSize,s=e.dataKey,l=e.stackedData,u=e.dataStartIndex,d=e.displayedData,b=e.offset,h=n.layout,y=l&&l.length,v=K.getBaseValue(n,a,r),j=!1,O=d.map((function(e,t){var n,d=Object(S.v)(e,s);y?n=l[u+t]:(n=d,m()(n)?j=!0:n=[v,n]);var p=f()(n[1])||y&&f()(d);return"horizontal"===h?{x:Object(S.k)({axis:a,ticks:i,bandSize:c,entry:e,index:t}),y:p?null:r.scale(n[1]),value:n,payload:e}:{x:p?null:a.scale(n[1]),y:Object(S.k)({axis:r,ticks:o,bandSize:c,entry:e,index:t}),value:n,payload:e}}));return t=y||j?O.map((function(e){return"horizontal"===h?{x:e.x,y:f()(p()(e,"value[0]"))||f()(p()(e,"y"))?null:r.scale(p()(e,"value[0]"))}:{x:f()(p()(e,"value[0]"))?null:a.scale(p()(e,"value[0]")),y:e.y}})):"horizontal"===h?r.scale(v):a.scale(v),T({points:O,baseLine:t,layout:h,isRange:j},b)},K.renderDotItem=function(e,t){return v.a.isValidElement(e)?v.a.cloneElement(e,t):u()(e)?e(t):v.a.createElement(D.a,I({},t,{className:"recharts-area-dot"}))}},1849:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(1603),r=n(1685),i=n(1600),o=n(1601),c=n(1533),s=Object(a.a)({chartName:"AreaChart",GraphicalChild:r.a,axisComponents:[{axisType:"xAxis",AxisComp:i.a},{axisType:"yAxis",AxisComp:o.a}],formatAxisMap:c.b})},1901:function(e,t,n){"use strict";n.r(t),n.d(t,"useStyles",(function(){return S}));var a=n(2),r=n(4),i=n(0),o=n(1),c=n(58),s=n(200),l=n(35),u=n(41),d=n(1950),p=n(1849),b=n(1895),f=n(1600),h=n(1601),m=n(1860),y=n(1685),v=n(23),j=n(40),O=n(1542),x=n(85),g=n(9),D=n(34),w=n(1684),A=n(16),k=n(22),P=n(1572),S=Object(c.a)((function(e){return{chartDescription:{marginTop:"0.3125rem"},tooltipContainer:{padding:"0.125rem",background:"white",border:"1px solid #4dabf5"},buttonGroupContainer:{textAlign:"end"},tooltipIcon:{marginLeft:e.spacing(.5)}}}));t.default=function(e){var t,n=e.salesChannel,c=e.getLoadingStatus,R=S(),M=Object(D.b)(),I=Object(o.useContext)(k.b),C=I.tenant,T=I.brandID,N=new Date,L=new Date(N.setHours(23,59,59,59)-864e5),z=new Date(new Date(L.getTime()-5184e5).setHours(0,0,0,0)),B=Object(s.a)((function(e){return e.breakpoints.down("sm")})),H=Object(o.useState)({type:"weekly",range:{startOrderDate:Math.round(z.getTime()/1e3),endOrderDate:Math.round(L.getTime()/1e3)}}),_=Object(r.a)(H,2),F=_[0],K=_[1],V=Object(o.useState)({code:"IDR",value:0}),W=Object(r.a)(V,2),G=W[0],J=W[1],q=Object(o.useState)(Object(w.a)(F.type,"netRevenue")),Q=Object(r.a)(q,2),U=Q[0],X=Q[1],Y=Object(v.a)(P.d,{onCompleted:function(e){var t,n,r,i,o,c,s,l=(null===e||void 0===e||null===(t=e.tenant)||void 0===t||null===(n=t.dashboardReport)||void 0===n||null===(r=n.dashboardNetRevenue[0])||void 0===r?void 0:r.netRevenues)||[],u=E(l),d=Object(w.a)(F.type,"netRevenue").map((function(e){var t;return Object(a.a)(Object(a.a)({},e),{},{netRevenue:null!==(t=u[e.orderDate])&&void 0!==t?t:0})}));X(d),J(null!==(i=null===e||void 0===e||null===(o=e.tenant)||void 0===o||null===(c=o.dashboardReport)||void 0===c||null===(s=c.dashboardNetRevenue[0])||void 0===s?void 0:s.totalNetRevenue)&&void 0!==i?i:0)},onError:function(e){var t,n;Object(A.x)({exceptionMessage:"".concat(null===(t=window)||void 0===t||null===(n=t.location)||void 0===n?void 0:n.hostname,". [DASHBOARD_STATISTIC_GMV] ").concat(e.message),context:{title:"context",data:{error:e,query:P.e,variables:JSON.stringify({tenantID:C.ID,brandIDs:[T],filter:F.range})}}}),M.show("","error",void 0,Object(A.u)("Gagal memuat statistik pendapatan toko!",e))},fetchPolicy:"cache-and-network"}),Z=Object(r.a)(Y,2),$=Z[0],ee=Z[1].loading;Object(o.useMemo)((function(){$({variables:{tenantID:C.ID,brandIDs:[T],filter:n?Object(a.a)(Object(a.a)({},F.range),{},{salesChannels:[n]}):F.range}})}),[F,n]),c&&c(ee);return Object(i.jsxs)(j.a,{children:[Object(i.jsxs)(l.a,{item:!0,container:!0,children:[Object(i.jsxs)(l.a,{item:!0,xs:6,md:10,children:[Object(i.jsxs)(u.a,{variant:"body1",children:[Object(i.jsx)("strong",{children:"Pendapatan Toko Kamu"}),Object(i.jsx)(x.a,{title:"Pantau pendapatan di toko Kamu dengan melihat perkembangan pendapatan yang diterima setiap harinya.",children:Object(i.jsx)(g.sb,{fontSize:"small",className:R.tooltipIcon,tabIndex:0})})]}),Object(i.jsx)(u.a,{variant:"body2",className:R.chartDescription,children:Object(i.jsx)("strong",{children:Object(A.f)(null!==(t=null===G||void 0===G?void 0:G.value)&&void 0!==t?t:0)})})]}),Object(i.jsx)(l.a,{item:!0,xs:6,md:2,className:R.buttonGroupContainer,children:Object(i.jsx)(O.a,{loading:ee,getSelectedPeriod:function(e){K(e)}})})]}),Object(i.jsx)(l.a,{item:!0,children:Object(i.jsx)(d.a,{width:"99%",height:B?160:300,children:Object(i.jsxs)(p.a,{data:U,margin:{top:20,left:-10},children:[Object(i.jsx)(b.a,{strokeDasharray:"3 3"}),Object(i.jsx)(f.a,{dataKey:"orderDate"}),Object(i.jsx)(h.a,{tickFormatter:function(e){return e>999999999?"".concat(e/1e9,"M"):e>999999?"".concat(e/1e6,"jt"):e>999?"".concat(e/1e3,"rb"):e.toString()}}),Object(i.jsx)(m.a,{content:function(e){var t,n=e.active,a=e.payload,r=e.label;return n&&a?Object(i.jsx)(l.a,{className:R.tooltipContainer,children:(null===(t=a[0])||void 0===t?void 0:t.value)>=0&&Object(i.jsx)(u.a,{variant:"body1",children:"".concat(r," : ").concat(Object(A.f)(a[0].value))})}):null}}),Object(i.jsx)(y.a,{type:"linear",dataKey:"netRevenue",stroke:"#4dabf5",strokeWidth:2,fill:"#4dabf5",dot:{r:4}})]})})})]})};var E=function(e){return e.reduce((function(e,t){return e[new Date(1e3*t.orderDate).toLocaleDateString("id-ID",{month:"short",day:"numeric"})]=t.netRevenue.value,e}),{})}}}]);